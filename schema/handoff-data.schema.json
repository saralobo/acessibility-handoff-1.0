{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Accessibility Handoff Data",
  "description": "Strict schema for AI-generated accessibility annotation data. The AI produces this JSON; the build script consumes it to create identical Figma output every time.",
  "type": "object",
  "required": ["screen", "template", "annotations"],
  "properties": {
    "screen": {
      "type": "object",
      "description": "The screen being annotated.",
      "required": ["name", "nodeId"],
      "properties": {
        "name": { "type": "string", "description": "Human-readable screen name (e.g., 'Payment')" },
        "nodeId": { "type": "string", "description": "Figma node ID of the screen to clone (e.g., '1:221')" },
        "figmaUrl": { "type": "string", "description": "Optional full Figma URL for reference" }
      }
    },
    "template": {
      "type": "object",
      "description": "Metadata for the hand-off template header.",
      "required": ["headline", "title", "description", "flowName"],
      "properties": {
        "headline": { "type": "string", "description": "Uppercase category label (e.g., 'CHECKOUT FLOW')" },
        "title": { "type": "string", "description": "Flow title displayed large (e.g., 'Payment')" },
        "description": { "type": "string", "description": "Context description" },
        "subflowLabel": { "type": "string", "default": "Sub-flow", "description": "Sidebar label text" },
        "flowName": { "type": "string", "description": "Name for the dark flow section" }
      }
    },
    "annotations": {
      "type": "array",
      "description": "Ordered list of accessibility annotations. Array order = reading order.",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["order", "componentName", "tagType", "side", "accessibilityName", "role"],
        "properties": {
          "order": { "type": "integer", "minimum": 0, "description": "Reading order number for badge. Use 0 for Group/Ignore (no badge)." },
          "componentName": { "type": "string", "description": "Human name of the target component" },
          "tagType": { "type": "string", "enum": ["Button", "Label", "H", "Group", "Ignore"], "description": "Button=green, Label=blue, H=purple, Group=red outline, Ignore=gray overlay" },
          "side": { "type": "string", "enum": ["direita", "esquerda", "baixo", "cima"], "description": "direita=tag LEFT line RIGHT, esquerda=tag RIGHT line LEFT, baixo=tag TOP line DOWN, cima=tag BOTTOM line UP" },
          "accessibilityName": { "type": "string", "description": "What the screen reader announces" },
          "role": { "type": "string", "description": "ARIA role or element type" },
          "state": { "type": "string", "description": "Optional state/action (Button tags only)" },
          "targetNodeId": { "type": "string", "description": "Optional Figma node ID for programmatic detection" }
        }
      }
    }
  }
}